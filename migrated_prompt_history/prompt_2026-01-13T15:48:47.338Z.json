[
  {
    "id": 103,
    "author": "user",
    "payload": {
      "type": "text",
      "text": "crea una aplicacion spa de un restaurante que tenga un menu , y que pueda agregar los elementos a un carrito  ",
      "files": [],
      "fileUploads": [],
      "cMarkNode": {}
    },
    "createdTimestamp": {
      "seconds": 1768319201,
      "nanos": 366000000
    }
  },
  {
    "id": 104,
    "author": "model",
    "payload": {
      "type": "thinking",
      "text": "**Beginning Initial Analysis**\n\nI'm currently breaking down the request to build a restaurant SPA. My initial focus is to understand the core goal and define key features like the menu display and shopping cart functionality. I'm taking notes and thinking about how these components will work together in a single-page environment.\n\n\n**Outlining Key Features**\n\nNow, I'm defining the necessary tech stack: React 18+ with TypeScript, Tailwind CSS, and considering the Google Gemini API for AI features to enhance the user experience. The language will be Spanish. Visually, the goal is \"world-class\" and \"amazing,\" achieved with Tailwind. I am also working to define the initial architecture.\n\n\n**Refining Component Structure**\n\nI'm now thinking about the specific components: `MenuSection.tsx` for item display, a `CartSidebar.tsx` sliding drawer, and an `AIRecommendation.tsx` component that uses Gemini to suggest pairings. I have the skeleton of the service ready, with `geminiService.ts` ready to call `@google/genai`. I've outlined the data structure and constants.\n\n\n**Integrating AI Features**\n\nI am now focusing on the AI integration. I've defined `geminiService.ts`, and I'm developing the `AIRecommendation.tsx` component which includes a modal for Gemini input and output. The `CartSidebar.tsx` will display a button that triggers the AI recommendations. I'm leveraging `gemini-3-flash-preview` for its text handling capabilities. I have defined functions `askChef(question: string)` and the internal functions called by the component.\n\n\n**Designing the UI Elements**\n\nI'm now thinking specifically about visual design. I am leaning toward using orange and red tones to stimulate appetite and am implementing a dark background for elegance, with `slate-900`. I have also made some decisions about typography: I want a sans-serif font for a clean aesthetic. Interactions will include transitions on buttons and hover effects on cards, and I am structuring the app to be mobile-first with a responsive grid.\n\nI am also making sure to follow my guidelines. The imports will be at the top level and named, using React's best practices, and I will be using Google Gemini and `picsum.photos`. I am also being careful to avoid infinite loops in `useEffect` and am correcting the gemini service to include a feature for AI. I am also working on adding the cart logic.\n\n\n",
      "cMarkNode": {}
    },
    "createdTimestamp": {
      "seconds": 1768319201,
      "nanos": 366000000
    },
    "doneTimestamp": {
      "seconds": 1768319222,
      "nanos": 292000000
    }
  },
  {
    "id": 105,
    "author": "model",
    "payload": {
      "type": "generationTable",
      "entries": [
        {
          "path": "metadata.json",
          "generationType": 0,
          "isDone": true,
          "description": "App metadata and description",
          "diffs": [
            {
              "target": "",
              "replacement": "{\n  \"name\": \"Sabor & Fuego - Restaurante\",\n  \"description\": \"Una experiencia gastron√≥mica moderna con pedidos en l√≠nea, carrito de compras inteligente y recomendaciones de un Chef IA potenciado por Gemini.\"\n}"
            }
          ]
        },
        {
          "path": "index.html",
          "generationType": 0,
          "isDone": true,
          "description": "Root HTML file with Tailwind CSS CDN",
          "diffs": [
            {
              "target": "",
              "replacement": "<!DOCTYPE html>\n<html lang=\"es\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Sabor & Fuego | Restaurante Moderno</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n      tailwind.config = {\n        theme: {\n          extend: {\n            colors: {\n              brand: {\n                50: '#fff7ed',\n                100: '#ffedd5',\n                200: '#fed7aa',\n                300: '#fdba74',\n                400: '#fb923c',\n                500: '#f97316',\n                600: '#ea580c',\n                700: '#c2410c',\n                800: '#9a3412',\n                900: '#7c2d12',\n              }\n            },\n            fontFamily: {\n              sans: ['Inter', 'system-ui', 'sans-serif'],\n              serif: ['Merriweather', 'serif'],\n            }\n          }\n        }\n      }\n    </script>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Merriweather:wght@400;700&display=swap\" rel=\"stylesheet\">\n    <style>\n      body { font-family: 'Inter', sans-serif; }\n      h1, h2, h3, h4 { font-family: 'Merriweather', serif; }\n      /* Custom scrollbar */\n      ::-webkit-scrollbar { width: 8px; }\n      ::-webkit-scrollbar-track { background: #f1f1f1; }\n      ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }\n      ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }\n    </style>\n  </head>\n  <body class=\"bg-gray-50 text-slate-800 antialiased\">\n    <div id=\"root\"></div>\n  </body>\n</html>"
            }
          ]
        },
        {
          "path": "index.tsx",
          "generationType": 0,
          "isDone": true,
          "description": "React entry point",
          "diffs": [
            {
              "target": "",
              "replacement": "import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\nconst rootElement = document.getElementById('root');\nif (!rootElement) {\n  throw new Error(\"Could not find root element to mount to\");\n}\n\nconst root = ReactDOM.createRoot(rootElement);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);"
            }
          ]
        },
        {
          "path": "types.ts",
          "generationType": 0,
          "isDone": true,
          "description": "TypeScript definitions for the application",
          "diffs": [
            {
              "target": "",
              "replacement": "export enum Category {\n  ENTRANTES = 'Entrantes',\n  PRINCIPALES = 'Principales',\n  POSTRES = 'Postres',\n  BEBIDAS = 'Bebidas'\n}\n\nexport interface MenuItem {\n  id: string;\n  name: string;\n  description: string;\n  price: number;\n  category: Category;\n  image: string;\n  popular?: boolean;\n}\n\nexport interface CartItem extends MenuItem {\n  quantity: number;\n}\n\nexport interface AIChatMessage {\n  role: 'user' | 'model';\n  text: string;\n  isThinking?: boolean;\n}"
            }
          ]
        },
        {
          "path": "constants.ts",
          "generationType": 0,
          "isDone": true,
          "description": "Menu data and application constants",
          "diffs": [
            {
              "target": "",
              "replacement": "import { Category, MenuItem } from './types';\n\nexport const MENU_ITEMS: MenuItem[] = [\n  // Entrantes\n  {\n    id: '1',\n    name: 'Bruschetta Toscana',\n    description: 'Pan r√∫stico tostado con tomates cherry frescos, albahaca, ajo y reducci√≥n de bals√°mico.',\n    price: 8.50,\n    category: Category.ENTRANTES,\n    image: 'https://picsum.photos/400/300?random=1',\n  },\n  {\n    id: '2',\n    name: 'Carpaccio de Res',\n    description: 'Finas l√°minas de solomillo, r√∫cula, queso parmesano y aceite de trufa.',\n    price: 14.00,\n    category: Category.ENTRANTES,\n    image: 'https://picsum.photos/400/300?random=2',\n    popular: true\n  },\n  {\n    id: '3',\n    name: 'Calamares a la Romana',\n    description: 'Anillos de calamar frescos rebozados, servidos con salsa t√°rtara casera.',\n    price: 11.00,\n    category: Category.ENTRANTES,\n    image: 'https://picsum.photos/400/300?random=3',\n  },\n\n  // Principales\n  {\n    id: '4',\n    name: 'Ribeye a la Parrilla',\n    description: '400g de corte premium a las brasas, acompa√±ado de pur√© de patatas trufado y esp√°rragos.',\n    price: 32.00,\n    category: Category.PRINCIPALES,\n    image: 'https://picsum.photos/400/300?random=4',\n    popular: true\n  },\n  {\n    id: '5',\n    name: 'Salm√≥n Glaseado',\n    description: 'Filete de salm√≥n fresco con glaseado de miel y mostaza, sobre cama de quinoa y verduras.',\n    price: 24.50,\n    category: Category.PRINCIPALES,\n    image: 'https://picsum.photos/400/300?random=5',\n  },\n  {\n    id: '6',\n    name: 'Risotto de Setas',\n    description: 'Arroz arborio cremoso con mezcla de setas silvestres, vino blanco y parmesano reggiano.',\n    price: 19.00,\n    category: Category.PRINCIPALES,\n    image: 'https://picsum.photos/400/300?random=6',\n  },\n  {\n    id: '7',\n    name: 'Hamburguesa Gourmet',\n    description: 'Carne Angus, queso brie, cebolla caramelizada y r√∫cula en pan brioche artesanal.',\n    price: 16.50,\n    category: Category.PRINCIPALES,\n    image: 'https://picsum.photos/400/300?random=7',\n  },\n\n  // Postres\n  {\n    id: '8',\n    name: 'Tiramis√∫ Cl√°sico',\n    description: 'Capas de bizcocho de soletilla empapadas en caf√© y crema de mascarpone.',\n    price: 7.50,\n    category: Category.POSTRES,\n    image: 'https://picsum.photos/400/300?random=8',\n    popular: true\n  },\n  {\n    id: '9',\n    name: 'Coulant de Chocolate',\n    description: 'Volc√°n de chocolate negro caliente con helado de vainilla de Madagascar.',\n    price: 9.00,\n    category: Category.POSTRES,\n    image: 'https://picsum.photos/400/300?random=9',\n  },\n\n  // Bebidas\n  {\n    id: '10',\n    name: 'Limonada de Menta',\n    description: 'Refrescante limonada casera con hojas de menta fresca y hielo picado.',\n    price: 4.50,\n    category: Category.BEBIDAS,\n    image: 'https://picsum.photos/400/300?random=10',\n  },\n  {\n    id: '11',\n    name: 'Vino Tinto Reserva',\n    description: 'Copa de vino tinto de la casa, D.O. Rioja.',\n    price: 6.00,\n    category: Category.BEBIDAS,\n    image: 'https://picsum.photos/400/300?random=11',\n  },\n];\n\nexport const SYSTEM_INSTRUCTION = `Eres el \"Chef Virtual\" de un restaurante llamado \"Sabor & Fuego\". \nTu objetivo es ayudar a los clientes a elegir platos del men√∫ y sugerir maridajes.\nS√© amable, sofisticado pero accesible y muy conciso (m√°ximo 2-3 frases por respuesta).\nSiempre recomienda platos bas√°ndote en lo que el usuario pregunte o lo que tenga en su carrito.\nSi te preguntan por al√©rgenos, sugiere preguntar al camarero humano por seguridad.`;\n"
            }
          ]
        },
        {
          "path": "services/geminiService.ts",
          "generationType": 0,
          "isDone": true,
          "description": "Service to interact with Google Gemini API",
          "diffs": [
            {
              "target": "",
              "replacement": "import { GoogleGenAI } from \"@google/genai\";\nimport { MenuItem, CartItem } from '../types';\nimport { SYSTEM_INSTRUCTION } from '../constants';\n\nconst apiKey = process.env.API_KEY || '';\nconst ai = apiKey ? new GoogleGenAI({ apiKey }) : null;\n\nexport const getChefRecommendation = async (\n  query: string, \n  currentCart: CartItem[], \n  menuContext: MenuItem[]\n): Promise<string> => {\n  if (!ai) {\n    return \"Lo siento, el Chef Virtual no est√° disponible en este momento (Falta API Key).\";\n  }\n\n  try {\n    const menuDescription = menuContext.map(i => `${i.name} (${i.category}): ${i.description}`).join('\\n');\n    const cartDescription = currentCart.length > 0 \n      ? \"El cliente tiene esto en su carrito: \" + currentCart.map(i => i.name).join(', ') \n      : \"El carrito est√° vac√≠o.\";\n\n    const prompt = `\n      Contexto del Men√∫:\n      ${menuDescription}\n\n      Contexto del Cliente:\n      ${cartDescription}\n\n      Pregunta del Cliente:\n      \"${query}\"\n\n      Responde como el Chef Virtual recomendando algo espec√≠fico del men√∫.\n    `;\n\n    const response = await ai.models.generateContent({\n      model: 'gemini-3-flash-preview',\n      contents: prompt,\n      config: {\n        systemInstruction: SYSTEM_INSTRUCTION,\n        temperature: 0.7,\n      }\n    });\n\n    return response.text || \"Lo siento, estoy teniendo problemas para pensar en una recomendaci√≥n.\";\n  } catch (error) {\n    console.error(\"Error calling Gemini:\", error);\n    return \"Hubo un error al consultar al Chef. Por favor intenta de nuevo.\";\n  }\n};\n"
            }
          ]
        },
        {
          "path": "components/Navbar.tsx",
          "generationType": 0,
          "isDone": true,
          "description": "Top navigation bar with cart toggle",
          "diffs": [
            {
              "target": "",
              "replacement": "import React from 'react';\n\ninterface NavbarProps {\n  cartCount: number;\n  onCartClick: () => void;\n  onMenuClick: () => void;\n}\n\nconst Navbar: React.FC<NavbarProps> = ({ cartCount, onCartClick, onMenuClick }) => {\n  return (\n    <nav className=\"fixed top-0 left-0 w-full z-40 bg-white/90 backdrop-blur-md shadow-sm border-b border-gray-100 transition-all duration-300\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-20\">\n          \n          {/* Logo */}\n          <div className=\"flex-shrink-0 cursor-pointer\" onClick={onMenuClick}>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-3xl\">üî•</span>\n              <div>\n                <h1 className=\"text-xl font-bold font-serif text-gray-900 tracking-tight\">Sabor & Fuego</h1>\n                <p className=\"text-xs text-brand-600 font-medium tracking-widest uppercase\">Parrilla & Fusi√≥n</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex items-center space-x-6\">\n            <button \n              onClick={onMenuClick}\n              className=\"hidden md:block text-gray-600 hover:text-brand-600 font-medium transition-colors\"\n            >\n              Men√∫\n            </button>\n            <button \n              className=\"hidden md:block text-gray-600 hover:text-brand-600 font-medium transition-colors\"\n            >\n              Reservas\n            </button>\n            \n            <button \n              onClick={onCartClick}\n              className=\"relative p-2 text-gray-800 hover:text-brand-600 transition-transform active:scale-95 group\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"w-7 h-7\">\n                <circle cx=\"9\" cy=\"21\" r=\"1\"></circle>\n                <circle cx=\"20\" cy=\"21\" r=\"1\"></circle>\n                <path d=\"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6\"></path>\n              </svg>\n              {cartCount > 0 && (\n                <span className=\"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/4 -translate-y-1/4 bg-brand-600 rounded-full shadow-md animate-in zoom-in duration-200\">\n                  {cartCount}\n                </span>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;"
            }
          ]
        },
        {
          "path": "components/MenuGrid.tsx",
          "generationType": 0,
          "isDone": true,
          "description": "Displays menu items organized by category",
          "diffs": [
            {
              "target": "",
              "replacement": "import React, { useState } from 'react';\nimport { MenuItem, Category } from '../types';\n\ninterface MenuGridProps {\n  items: MenuItem[];\n  onAddToCart: (item: MenuItem) => void;\n}\n\nconst MenuGrid: React.FC<MenuGridProps> = ({ items, onAddToCart }) => {\n  const [activeCategory, setActiveCategory] = useState<Category | 'Todos'>('Todos');\n\n  const categories = ['Todos', ...Object.values(Category)];\n\n  const filteredItems = activeCategory === 'Todos' \n    ? items \n    : items.filter(item => item.category === activeCategory);\n\n  return (\n    <div id=\"menu\" className=\"py-16 bg-gray-50 min-h-screen\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        \n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-3xl md:text-4xl font-serif font-bold text-gray-900 mb-4\">Nuestra Carta</h2>\n          <p className=\"text-gray-600 max-w-2xl mx-auto\">\n            Ingredientes frescos, recetas tradicionales y un toque de fuego. Descubre los sabores que nos hacen √∫nicos.\n          </p>\n        </div>\n\n        {/* Category Filter */}\n        <div className=\"flex flex-wrap justify-center gap-2 mb-12 sticky top-24 z-30 bg-gray-50/95 p-4 rounded-xl backdrop-blur-sm\">\n          {categories.map((cat) => (\n            <button\n              key={cat}\n              onClick={() => setActiveCategory(cat as Category | 'Todos')}\n              className={`px-6 py-2 rounded-full text-sm font-medium transition-all duration-300 ${\n                activeCategory === cat\n                  ? 'bg-brand-600 text-white shadow-lg scale-105'\n                  : 'bg-white text-gray-600 border border-gray-200 hover:border-brand-300 hover:text-brand-500'\n              }`}\n            >\n              {cat}\n            </button>\n          ))}\n        </div>\n\n        {/* Grid */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8\">\n          {filteredItems.map((item) => (\n            <div \n              key={item.id} \n              className=\"group bg-white rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden flex flex-col border border-gray-100\"\n            >\n              <div className=\"relative h-56 overflow-hidden\">\n                <img \n                  src={item.image} \n                  alt={item.name} \n                  className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110\"\n                />\n                {item.popular && (\n                  <span className=\"absolute top-4 left-4 bg-yellow-400 text-yellow-900 text-xs font-bold px-3 py-1 rounded-full shadow-md\">\n                    ‚òÖ Popular\n                  </span>\n                )}\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\n              </div>\n              \n              <div className=\"p-6 flex-1 flex flex-col\">\n                <div className=\"flex justify-between items-start mb-2\">\n                  <h3 className=\"text-xl font-bold text-gray-900 font-serif group-hover:text-brand-700 transition-colors\">\n                    {item.name}\n                  </h3>\n                  <span className=\"text-lg font-bold text-brand-600 font-serif\">\n                    ${item.price.toFixed(2)}\n                  </span>\n                </div>\n                \n                <p className=\"text-gray-600 text-sm mb-6 flex-1 leading-relaxed\">\n                  {item.description}\n                </p>\n\n                <button\n                  onClick={() => onAddToCart(item)}\n                  className=\"w-full bg-gray-900 text-white py-3 rounded-xl font-medium hover:bg-brand-600 active:bg-brand-700 transition-colors duration-300 flex items-center justify-center gap-2 group-active:scale-[0.98]\"\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                    <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line>\n                    <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n                  </svg>\n                  Agregar al Carrito\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MenuGrid;"
            }
          ]
        },
        {
          "path": "components/CartSidebar.tsx",
          "generationType": 0,
          "isDone": true,
          "description": "Sliding sidebar showing cart contents",
          "diffs": [
            {
              "target": "",
              "replacement": "import React, { useMemo } from 'react';\nimport { CartItem } from '../types';\n\ninterface CartSidebarProps {\n  isOpen: boolean;\n  onClose: () => void;\n  items: CartItem[];\n  onUpdateQuantity: (id: string, delta: number) => void;\n  onCheckout: () => void;\n  onAskChef: () => void; // Trigger AI from cart\n}\n\nconst CartSidebar: React.FC<CartSidebarProps> = ({ \n  isOpen, \n  onClose, \n  items, \n  onUpdateQuantity,\n  onCheckout,\n  onAskChef\n}) => {\n  const total = useMemo(() => items.reduce((sum, item) => sum + (item.price * item.quantity), 0), [items]);\n\n  return (\n    <>\n      {/* Backdrop */}\n      <div \n        className={`fixed inset-0 bg-black/40 backdrop-blur-sm z-50 transition-opacity duration-300 ${isOpen ? 'opacity-100' : 'opacity-0 pointer-events-none'}`}\n        onClick={onClose}\n      />\n\n      {/* Sidebar Panel */}\n      <div className={`fixed inset-y-0 right-0 max-w-md w-full bg-white z-50 shadow-2xl transform transition-transform duration-300 ease-out flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}>\n        \n        {/* Header */}\n        <div className=\"p-6 border-b border-gray-100 flex items-center justify-between bg-white\">\n          <h2 className=\"text-2xl font-serif font-bold text-gray-900\">Tu Pedido</h2>\n          <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-full\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-y-auto p-6 space-y-6\">\n          {items.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center h-full text-center text-gray-500 space-y-4\">\n              <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-gray-400\">\n                  <circle cx=\"9\" cy=\"21\" r=\"1\"></circle>\n                  <circle cx=\"20\" cy=\"21\" r=\"1\"></circle>\n                  <path d=\"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6\"></path>\n                </svg>\n              </div>\n              <p className=\"text-lg\">Tu carrito est√° vac√≠o</p>\n              <button \n                onClick={onClose}\n                className=\"text-brand-600 font-medium hover:underline\"\n              >\n                Volver al men√∫\n              </button>\n            </div>\n          ) : (\n            items.map((item) => (\n              <div key={item.id} className=\"flex gap-4 animate-in slide-in-from-right-4 duration-300\">\n                <img src={item.image} alt={item.name} className=\"w-20 h-20 object-cover rounded-lg shadow-sm\" />\n                <div className=\"flex-1\">\n                  <h4 className=\"font-semibold text-gray-900 font-serif\">{item.name}</h4>\n                  <p className=\"text-brand-600 font-medium\">${item.price.toFixed(2)}</p>\n                  \n                  <div className=\"flex items-center mt-3 gap-3\">\n                    <button \n                      onClick={() => onUpdateQuantity(item.id, -1)}\n                      className=\"w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center text-gray-600 hover:bg-gray-100 hover:border-gray-300 transition-colors\"\n                    >\n                      -\n                    </button>\n                    <span className=\"w-4 text-center text-gray-900 font-medium\">{item.quantity}</span>\n                    <button \n                      onClick={() => onUpdateQuantity(item.id, 1)}\n                      className=\"w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center text-gray-600 hover:bg-gray-100 hover:border-gray-300 transition-colors\"\n                    >\n                      +\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))\n          )}\n          \n          {items.length > 0 && (\n            <div className=\"bg-blue-50 p-4 rounded-xl border border-blue-100\">\n              <div className=\"flex items-start gap-3\">\n                <span className=\"text-2xl\">üë®‚Äçüç≥</span>\n                <div>\n                  <h4 className=\"font-bold text-blue-900 text-sm\">¬øDudas con tu pedido?</h4>\n                  <p className=\"text-blue-700 text-xs mt-1 mb-2\">Preg√∫ntale al Chef Virtual qu√© bebida marida mejor con esto.</p>\n                  <button \n                    onClick={onAskChef}\n                    className=\"text-xs bg-white text-blue-600 px-3 py-1.5 rounded-md border border-blue-200 hover:bg-blue-50 font-medium shadow-sm transition-colors\"\n                  >\n                    Consultar al Chef IA\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        {items.length > 0 && (\n          <div className=\"p-6 border-t border-gray-100 bg-gray-50\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <span className=\"text-gray-600 font-medium\">Subtotal</span>\n              <span className=\"text-2xl font-bold text-gray-900 font-serif\">${total.toFixed(2)}</span>\n            </div>\n            <button \n              onClick={onCheckout}\n              className=\"w-full bg-brand-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg shadow-brand-200 hover:bg-brand-700 hover:shadow-xl active:scale-[0.99] transition-all duration-200 flex justify-center items-center gap-2\"\n            >\n              Confirmar Pedido\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n                <polyline points=\"12 5 19 12 12 19\"></polyline>\n              </svg>\n            </button>\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default CartSidebar;"
            }
          ]
        },
        {
          "path": "components/AIChefModal.tsx",
          "generationType": 0,
          "isDone": true,
          "description": "AI Chef Chat Interface",
          "diffs": [
            {
              "target": "",
              "replacement": "import React, { useState, useRef, useEffect } from 'react';\nimport { CartItem, MenuItem, AIChatMessage } from '../types';\nimport { getChefRecommendation } from '../services/geminiService';\n\ninterface AIChefModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  cartItems: CartItem[];\n  menuItems: MenuItem[];\n}\n\nconst AIChefModal: React.FC<AIChefModalProps> = ({ isOpen, onClose, cartItems, menuItems }) => {\n  const [messages, setMessages] = useState<AIChatMessage[]>([\n    { role: 'model', text: '¬°Hola! Soy el Chef Virtual de Sabor & Fuego. ¬øBuscas un vino para tu carne o quiz√°s un postre ligero? Estoy aqu√≠ para ayudarte.' }\n  ]);\n  const [inputValue, setInputValue] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    if (isOpen) scrollToBottom();\n  }, [messages, isOpen]);\n\n  const handleSend = async () => {\n    if (!inputValue.trim() || isLoading) return;\n\n    const userMsg: AIChatMessage = { role: 'user', text: inputValue };\n    setMessages(prev => [...prev, userMsg]);\n    setInputValue('');\n    setIsLoading(true);\n\n    try {\n      const responseText = await getChefRecommendation(userMsg.text, cartItems, menuItems);\n      setMessages(prev => [...prev, { role: 'model', text: responseText }]);\n    } catch (error) {\n      setMessages(prev => [...prev, { role: 'model', text: \"Lo siento, tuve un problema en la cocina. ¬øPodr√≠as repetir?\" }]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') handleSend();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-[60] flex items-center justify-center p-4\">\n      {/* Backdrop */}\n      <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\" onClick={onClose} />\n      \n      {/* Modal */}\n      <div className=\"relative w-full max-w-lg bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[80vh] animate-in zoom-in-95 duration-200\">\n        \n        {/* Header */}\n        <div className=\"bg-slate-900 p-4 flex justify-between items-center text-white\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-full bg-brand-600 flex items-center justify-center text-xl\">\n              üë®‚Äçüç≥\n            </div>\n            <div>\n              <h3 className=\"font-bold font-serif\">Chef Virtual</h3>\n              <p className=\"text-xs text-slate-300\">Potenciado por Gemini AI</p>\n            </div>\n          </div>\n          <button onClick={onClose} className=\"text-slate-400 hover:text-white transition-colors\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n\n        {/* Chat Body */}\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50\">\n          {messages.map((msg, idx) => (\n            <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>\n              <div \n                className={`max-w-[80%] p-3 rounded-2xl text-sm leading-relaxed shadow-sm ${\n                  msg.role === 'user' \n                    ? 'bg-brand-600 text-white rounded-tr-none' \n                    : 'bg-white text-gray-800 rounded-tl-none border border-gray-100'\n                }`}\n              >\n                {msg.text}\n              </div>\n            </div>\n          ))}\n          {isLoading && (\n            <div className=\"flex justify-start\">\n              <div className=\"bg-white p-3 rounded-2xl rounded-tl-none border border-gray-100 flex gap-1\">\n                <span className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></span>\n                <span className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-100\"></span>\n                <span className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-200\"></span>\n              </div>\n            </div>\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n\n        {/* Input */}\n        <div className=\"p-4 bg-white border-t border-gray-100\">\n          <div className=\"flex gap-2\">\n            <input\n              type=\"text\"\n              value={inputValue}\n              onChange={(e) => setInputValue(e.target.value)}\n              onKeyDown={handleKeyDown}\n              placeholder=\"Preg√∫ntame por recomendaciones...\"\n              className=\"flex-1 border border-gray-300 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent text-sm\"\n            />\n            <button \n              onClick={handleSend}\n              disabled={isLoading || !inputValue.trim()}\n              className=\"bg-slate-900 text-white p-3 rounded-xl hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                <line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\"></line>\n                <polygon points=\"22 2 15 22 11 13 2 9 22 2\"></polygon>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  );\n};\n\nexport default AIChefModal;"
            }
          ]
        },
        {
          "path": "components/Hero.tsx",
          "generationType": 0,
          "isDone": true,
          "description": "Hero section with call to action",
          "diffs": [
            {
              "target": "",
              "replacement": "import React from 'react';\n\ninterface HeroProps {\n  onOrderNow: () => void;\n}\n\nconst Hero: React.FC<HeroProps> = ({ onOrderNow }) => {\n  return (\n    <div className=\"relative h-[80vh] w-full flex items-center justify-center overflow-hidden\">\n      {/* Background Image with Parallax-like effect */}\n      <div className=\"absolute inset-0 z-0\">\n        <img \n          src=\"https://images.unsplash.com/photo-1544025162-d76690b6d015?q=80&w=2560&auto=format&fit=crop\" \n          alt=\"Restaurant Ambiance\" \n          className=\"w-full h-full object-cover\"\n        />\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent opacity-90\"></div>\n      </div>\n\n      <div className=\"relative z-10 text-center px-4 max-w-4xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-8 duration-1000\">\n        <span className=\"inline-block py-1 px-3 rounded-full bg-brand-600/20 border border-brand-500 text-brand-400 font-bold tracking-widest text-xs uppercase mb-2 backdrop-blur-sm\">\n          Gastronom√≠a Premium\n        </span>\n        <h1 className=\"text-5xl md:text-7xl font-serif font-bold text-white leading-tight drop-shadow-lg\">\n          Donde el Fuego <br/>\n          <span className=\"text-brand-500\">Crea Arte</span>\n        </h1>\n        <p className=\"text-lg md:text-xl text-gray-200 max-w-2xl mx-auto leading-relaxed\">\n          Experimenta una fusi√≥n culinaria √∫nica. Ingredientes seleccionados, cocina de autor y una atm√≥sfera inolvidable.\n        </p>\n        \n        <div className=\"flex flex-col sm:flex-row gap-4 justify-center pt-4\">\n          <button \n            onClick={onOrderNow}\n            className=\"px-8 py-4 bg-brand-600 text-white rounded-full font-bold text-lg hover:bg-brand-700 transition-all shadow-[0_0_20px_rgba(249,115,22,0.5)] hover:scale-105 active:scale-95\"\n          >\n            Ver Men√∫ y Pedir\n          </button>\n          <button className=\"px-8 py-4 bg-white/10 backdrop-blur-md border border-white/20 text-white rounded-full font-bold text-lg hover:bg-white/20 transition-all hover:scale-105 active:scale-95\">\n            Reservar Mesa\n          </button>\n        </div>\n      </div>\n\n      {/* Scroll indicator */}\n      <div className=\"absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce text-white/50\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n          <path d=\"M7 13l5 5 5-5M7 6l5 5 5-5\"/>\n        </svg>\n      </div>\n    </div>\n  );\n};\n\nexport default Hero;"
            }
          ]
        },
        {
          "path": "App.tsx",
          "generationType": 0,
          "isDone": true,
          "description": "Main application component containing state logic",
          "diffs": [
            {
              "target": "",
              "replacement": "import React, { useState, useEffect, useCallback } from 'react';\nimport Navbar from './components/Navbar';\nimport Hero from './components/Hero';\nimport MenuGrid from './components/MenuGrid';\nimport CartSidebar from './components/CartSidebar';\nimport AIChefModal from './components/AIChefModal';\nimport { MenuItem, CartItem } from './types';\nimport { MENU_ITEMS } from './constants';\n\nconst App: React.FC = () => {\n  const [cartItems, setCartItems] = useState<CartItem[]>([]);\n  const [isCartOpen, setIsCartOpen] = useState(false);\n  const [isChefOpen, setIsChefOpen] = useState(false);\n\n  // Load cart from local storage on mount\n  useEffect(() => {\n    const savedCart = localStorage.getItem('cart');\n    if (savedCart) {\n      try {\n        setCartItems(JSON.parse(savedCart));\n      } catch (e) {\n        console.error(\"Failed to parse cart\", e);\n      }\n    }\n  }, []);\n\n  // Save cart to local storage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cartItems));\n  }, [cartItems]);\n\n  const addToCart = useCallback((item: MenuItem) => {\n    setCartItems(prev => {\n      const existing = prev.find(i => i.id === item.id);\n      if (existing) {\n        return prev.map(i => i.id === item.id ? { ...i, quantity: i.quantity + 1 } : i);\n      }\n      return [...prev, { ...item, quantity: 1 }];\n    });\n    setIsCartOpen(true);\n  }, []);\n\n  const updateQuantity = useCallback((id: string, delta: number) => {\n    setCartItems(prev => prev.map(item => {\n      if (item.id === id) {\n        const newQty = item.quantity + delta;\n        return newQty > 0 ? { ...item, quantity: newQty } : null;\n      }\n      return item;\n    }).filter(Boolean) as CartItem[]);\n  }, []);\n\n  const totalItems = cartItems.reduce((acc, item) => acc + item.quantity, 0);\n\n  const scrollToMenu = () => {\n    const menuSection = document.getElementById('menu');\n    menuSection?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const handleCheckout = () => {\n    alert(\"¬°Gracias por tu pedido! La cocina comenzar√° a prepararlo de inmediato.\");\n    setCartItems([]);\n    setIsCartOpen(false);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <Navbar \n        cartCount={totalItems} \n        onCartClick={() => setIsCartOpen(true)}\n        onMenuClick={scrollToMenu}\n      />\n      \n      <main>\n        <Hero onOrderNow={scrollToMenu} />\n        <MenuGrid items={MENU_ITEMS} onAddToCart={addToCart} />\n      </main>\n\n      <footer className=\"bg-slate-900 text-white py-12\">\n        <div className=\"max-w-7xl mx-auto px-4 text-center\">\n          <h2 className=\"text-2xl font-serif font-bold mb-4\">Sabor & Fuego</h2>\n          <p className=\"text-slate-400 mb-8\">Parrilla, Pasi√≥n y Tecnolog√≠a.</p>\n          <div className=\"text-sm text-slate-500\">\n            &copy; {new Date().getFullYear()} Sabor & Fuego Restaurante. Todos los derechos reservados.\n          </div>\n        </div>\n      </footer>\n\n      <CartSidebar \n        isOpen={isCartOpen} \n        onClose={() => setIsCartOpen(false)} \n        items={cartItems} \n        onUpdateQuantity={updateQuantity}\n        onCheckout={handleCheckout}\n        onAskChef={() => setIsChefOpen(true)}\n      />\n\n      <AIChefModal \n        isOpen={isChefOpen}\n        onClose={() => setIsChefOpen(false)}\n        cartItems={cartItems}\n        menuItems={MENU_ITEMS}\n      />\n\n      {/* Floating Action Button for AI Chef on mobile/desktop if cart is closed */}\n      {!isCartOpen && !isChefOpen && (\n        <button\n          onClick={() => setIsChefOpen(true)}\n          className=\"fixed bottom-6 right-6 bg-slate-900 hover:bg-slate-800 text-white p-4 rounded-full shadow-2xl z-40 transition-transform hover:scale-110 flex items-center gap-2 group\"\n        >\n          <span className=\"text-2xl\">üë®‚Äçüç≥</span>\n          <span className=\"max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-300 font-medium whitespace-nowrap\">\n            Preguntar al Chef\n          </span>\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default App;"
            }
          ]
        }
      ]
    },
    "createdTimestamp": {
      "seconds": 1768319222,
      "nanos": 292000000
    },
    "doneTimestamp": {
      "seconds": 1768319223,
      "nanos": 167000000
    }
  }
]